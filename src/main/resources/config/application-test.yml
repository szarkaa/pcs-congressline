# ===================================================================
# Spring Boot configuration for the "prod" profile.
#
# This configuration overrides the application.yml file.
#
# More information on profiles: https://www.jhipster.tech/profiles/
# More information on configuration properties: https://www.jhipster.tech/common-application-properties/
# ===================================================================

# ===================================================================
# Standard Spring Boot properties.
# Full reference is available at:
# http://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html
# ===================================================================

logging:
    level:
        ROOT: info
        hu.congressline.pcs: info

management:
    prometheus:
        metrics:
            export:
                enabled: false

spring:
    devtools:
        restart:
            enabled: false
        livereload:
            enabled: false
    datasource:
        type: com.zaxxer.hikari.HikariDataSource
        url: jdbc:mariadb://localhost:3306/pcs?useLegacyDatetimeCode=false
        username: root
        password:
        hikari:
            poolName: Hikari
            auto-commit: false
            data-source-properties:
                cachePrepStmts: true
                prepStmtCacheSize: 250
                prepStmtCacheSqlLimit: 2048
                useServerPrepStmts: true
    # Replace by 'prod, faker' to add the faker context and have sample data loaded in production
    liquibase:
        contexts: prod
    thymeleaf:
        cache: true

# ===================================================================
# To enable TLS in production, generate a certificate using:
# keytool -genkey -alias pcs -storetype PKCS12 -keyalg RSA -keysize 2048 -keystore keystore.p12 -validity 3650
#
# You can also use Let's Encrypt:
# See details in topic "Create a Java Keystore (.JKS) from Let's Encrypt Certificates" on https://maximilian-boehm.com/en-gb/blog
#
# Then, modify the server.ssl properties so your "server" configuration looks like:
#
# server:
#   port: 443
#   ssl:
#     key-store: classpath:config/tls/keystore.p12
#     key-store-password: password
#     key-store-type: PKCS12
#     key-alias: selfsigned
#     # The ciphers suite enforce the security by deactivating some old and deprecated SSL cipher, this list was tested against SSL Labs (https://www.ssllabs.com/ssltest/)
#     ciphers: TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA,TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384 ,TLS_DHE_RSA_WITH_AES_128_GCM_SHA256 ,TLS_DHE_RSA_WITH_AES_256_GCM_SHA384 ,TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256,TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384,TLS_DHE_RSA_WITH_AES_128_CBC_SHA256,TLS_DHE_RSA_WITH_AES_128_CBC_SHA,TLS_DHE_RSA_WITH_AES_256_CBC_SHA256,TLS_DHE_RSA_WITH_AES_256_CBC_SHA,TLS_RSA_WITH_AES_128_GCM_SHA256,TLS_RSA_WITH_AES_256_GCM_SHA384,TLS_RSA_WITH_AES_128_CBC_SHA256,TLS_RSA_WITH_AES_256_CBC_SHA256,TLS_RSA_WITH_AES_128_CBC_SHA,TLS_RSA_WITH_AES_256_CBC_SHA,TLS_DHE_RSA_WITH_CAMELLIA_256_CBC_SHA,TLS_RSA_WITH_CAMELLIA_256_CBC_SHA,TLS_DHE_RSA_WITH_CAMELLIA_128_CBC_SHA,TLS_RSA_WITH_CAMELLIA_128_CBC_SHA
# ===================================================================
server:
    port: 8080
    shutdown: graceful # see https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-graceful-shutdown
    compression:
        enabled: true
        mime-types: text/html,text/xml,text/plain,text/css,application/javascript,application/json,image/svg+xml
        min-response-size: 1024

# ===================================================================
# PCS specific properties
#
# Full reference is available at: https://www.jhipster.tech/common-application-properties/
# ===================================================================

pcs:
    cors:
        # Allow Ionic for JHipster by default (* no longer allowed in Spring Boot 2.4+)
        allowed-origins: 'http://localhost:8002,https://localhost:8002,http://79.139.56.150:8002,https://79.139.56.150:8002,https://pcs-system-test.congressline.hu'
        # Enable CORS when running in GitHub Codespaces
        allowed-origin-patterns: 'https://*.githubpreview.dev'
        allowed-methods: '*'
        allowed-headers: '*'
        exposed-headers: 'Link,X-Total-Count,X-pcs-alert,X-pcs-error,X-pcs-params'
        allow-credentials: true
        max-age: 1800
    http:
        cache: # Used by the CachingHttpHeadersFilter
            timeToLiveInDays: 1461
    security:
        remember-me:
            # security key (this key should be unique for your application, and kept secret)
            key: 0580c79729b82d83278a3cc08ab4138c95b38f0fceb224ff72f61d5ce615f33b398f47bc1d08345a3ede3688e1535c6ca2d7
    mail: # specific JHipster mail property, for standard properties see MailProperties
        base-url: https://pcs-system-test.congressline.hu # Modify according to your server's URL

# ===================================================================
# Application specific properties
# ===================================================================
application:
    system:
        base-url: https://pcs-system-test.congressline.hu
    nav:
        url: https://api-test.onlineszamla.nav.gov.hu/invoiceService/v3
        checkingFrequencyInMillis: 300000
        header:
            headerVersion: 1.0
            requestVersion: 3.0
        user:
            login: jixhtgzomd5jw32
            password: 5B1B3268E8B0555DF15028B2B455EEFD6F6E2B837BA6DE91F5ADAF2DE0669C4BBF97EB5E7DC3749B6D5ACD486706B348D9DCB02F88208E1BD828450535390E76
            signKey: d5-923f-6e151530a4722O9NPD0WWN2P
            changeKey: 2e2c2O9NPD0XD5G7
            taxNumber: 14038905
        software:
            softwareId: 968573948510843958
            softwareName: PCS Online Congressline Software
            softwareMainVersion: 1.0
            softwareDevName: developer
            softwareDevContact: developer@congressline.hu
            softwareDevCountryCode: HU
            softwareDevTaxNumber: 14038905
    payment:
        gateway:
            url: https://api.sandbox.khpos.hu/api/v1.0
            merchantIdForEUR: M199002605
            merchantIdForHUF: M199002604
            paymentKeyFilePath: c:/worx/pcs/sign/v2
            signRequired: true
            returnUrl: https://pcs-system-test.congressline.hu/api/registration/online/kh/payment/result
            checkingFrequencyInMillis: 60000

