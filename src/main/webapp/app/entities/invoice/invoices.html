<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-10">
        <h2 translate="pcsApp.invoice.home.invoiceListLabel" translate-values="{lastName: '{{vm.registration.lastName}}', firstName: '{{vm.registration.firstName}}'}">Invoices for {{vm.registration.lastName}}, {{vm.registration.firstName}}</h2>
        <small class="text-danger" ng-show="!vm.hasValidCurrencyRate">Please add valid currency rate in order to make valid invoices!</small>
    </div>
    <div class="col-lg-2">

    </div>
</div>
<jhi-alert></jhi-alert>
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox">
                <div class="ibox-title float-e-margins">
                    <button ng-show="vm.hasValidCurrencyRate" class="btn btn-primary" type="submit" ui-sref="invoice.new">
                        <i class="fa fa-plus"></i>
                    </button>

                    <button class="btn btn-info" type="submit" ui-sref="registration({registrationId: vm.registration.id})">
                        <i class="fa fa-arrow-left"></i>
                    </button>
                </div>
                <div class="ibox-content">
                    <table id="invoice-datatable" class="table table-striped table-bordered table-hover datatable-with-operations">
                        <thead>
                        <tr>
                            <th><span translate="pcsApp.invoice.invoiceNumber">Invoice Number</span></th>
                            <th><span translate="pcsApp.invoice.storno">Storno</span></th>
                            <th><span translate="pcsApp.invoice.stornoInvoiceNumber">Storno Invoice Number</span></th>
                            <th><span translate="pcsApp.invoice.createdDate">Created Date</span></th>
                            <th><span translate="pcsApp.invoice.dateOfPayment">Date of payment</span></th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="invoice in vm.invoices track by invoice.id">
                            <td>{{invoice.invoiceNumber}}</td>
                            <td>{{invoice.storno}}</td>
                            <td>{{invoice.stornoInvoiceNumber}}</td>
                            <td>{{invoice.createdDate | date:'mediumDate'}}</td>
                            <td>{{invoice.dateOfPayment}}</td>
                            <td>
                                <send-invoice-email-dialog invoice="{{invoice.id}}" email="{{vm.registration.email}}">
                                    <button class="btn btn-info" tooltip-placement="top" uib-tooltip="Resend invoice via email" type="button"><i class="fa fa-envelope"></i></button>
                                </send-invoice-email-dialog>
                                <button class="btn btn-info" type="button" tooltip-placement="top" uib-tooltip="Download invoice"
                                        ng-click="vm.downloadPdf(invoice.id)"><i class="fa fa-download"></i></button>
                                <button class="btn btn-danger" type="submit" tooltip-placement="top" uib-tooltip="Invoice storno"
                                        ng-hide="invoice.storno || invoice.stornired" ui-sref="invoice.storno({invoiceId: invoice.id})"><i class="fa fa-undo"></i></button>
                                <button class="btn btn-success" type="submit" ng-hide="invoiceCongress.invoice.storno || invoiceCongress.invoice.stornired"
                                        ui-sref="invoice.set-payment-date({id: invoice.id})" tooltip-placement="left" uib-tooltip="Set payment date"><i class="fa fa-calendar"></i></button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
